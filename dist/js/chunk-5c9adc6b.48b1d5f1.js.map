{"version":3,"sources":["webpack:///./src/modules/auth/views/LoginPage.vue?7a1b","webpack:///./src/modules/auth/views/LoginPage.vue?51ab","webpack:///./src/modules/auth/views/LoginPage.vue","webpack:///./src/modules/auth/views/LoginPage.vue?4ef4","webpack:///./src/modules/auth/views/LoginPage.vue?4359"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","$route","name","ref","attrs","form","rules","_v","_s","$t","model","value","callback","$$v","$set","expression","showPass","on","$event","remember","staticStyle","language","siteKey","verifyCaptcha","expiredCaptcha","class","getDisableBtn","isLoading","handleLogin","handleChangeLanguage","staticRenderFns","bcAuth","apiAuth","email","password","isVerifyCaptcha","captcha","optionLanguage","id","lang","required","message","trigger","type","window","localStorage","getItem","$router","push","$refs","clearValidate","validate","valid","encodePass","$options","filters","encryptPassword","validateUser","res","nameRoute","emailVerified","phoneVerified","query","reason","$message","success","duration","error","pass","console","log","login","then","data","response","status","reset","Action","components","VueRecaptcha","HeaderLogin","VerifyPage","Verify","Language","component"],"mappings":"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","file":"js/chunk-5c9adc6b.48b1d5f1.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=style&index=0&id=805c2f24&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bc-login\"},[_c('header-login'),_c('div',{staticClass:\"form\"},[(_vm.$route.name === 'login')?_c('el-form',{ref:\"form-login\",staticClass:\"form-item\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules}},[_c('div',{staticClass:\"text-3xl text-semibold text-center mb-2 title-form\"},[_vm._v(_vm._s(_vm.$t('login.title-form')))]),_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"placeholder\":\"Email\",\"type\":\"email\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_c('el-form-item',{staticClass:\"input-password\",attrs:{\"prop\":\"password\"}},[_c('el-input',{staticClass:\"input-password\",attrs:{\"type\":_vm.showPass == true ? 'text' : 'password',\"placeholder\":_vm.$t('login.placeholder.password')},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}}),_c('span',{staticClass:\"icon-show-password\",on:{\"click\":function($event){_vm.showPass = !_vm.showPass}}},[_c('base-icon',{attrs:{\"icon\":_vm.showPass == true ? 'icon-eye-off' : 'icon-eye',\"size\":\"22\"}})],1)],1),_c('div',{staticClass:\"be-flex jc-space-between w-100 mt-2\"},[_c('el-checkbox',{model:{value:(_vm.remember),callback:function ($$v) {_vm.remember=$$v},expression:\"remember\"}},[_c('span',{staticClass:\"text-base\",staticStyle:{\"color\":\"#201f1e\",\"font-weight\":\"400\",\"margin-left\":\"-2px\"}},[_vm._v(_vm._s(_vm.$t('login.remember')))])])],1),_c('div',{staticClass:\"captcha be-flex jc-space-center mt-2\"},[_c('vue-recaptcha',{ref:\"recaptcha\",attrs:{\"loadRecaptchaScript\":true,\"language\":_vm.language,\"sitekey\":_vm.siteKey},on:{\"verify\":_vm.verifyCaptcha,\"expired\":_vm.expiredCaptcha}})],1),_c('el-button',{staticClass:\"btn w-100 is-none-border cursor\",class:_vm.getDisableBtn ? 'btn--disabled' : null,attrs:{\"loading\":_vm.isLoading},on:{\"click\":_vm.handleLogin}},[_vm._v(_vm._s(_vm.$t('login.title-form'))+\" \")])],1):_c('verify-page',{ref:\"verify\",staticClass:\"form-item\"})],1),_c('language',{attrs:{\"isReload\":_vm.$route.name === 'login' ? true : false},on:{\"changeLanguage\":_vm.handleChangeLanguage}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport VueRecaptcha from 'vue-recaptcha'\nimport HeaderLogin from '../components/HeaderLogin.vue'\nimport Language from '../components/Language.vue'\nimport VerifyPage from './Verify.vue'\nimport getRepository from '@/services'\nimport { AuthRepository } from '@/services/repositories/auth'\nimport { Component, Vue } from 'vue-property-decorator'\nimport { namespace } from 'vuex-class'\n\nconst bcAuth = namespace('beAuth')\nconst apiAuth: AuthRepository = getRepository('auth')\n\ninterface FormLogin {\n  email: string\n  password: string\n}\n\n@Component({ components: { VueRecaptcha, HeaderLogin, VerifyPage, Language } })\nexport default class LoginPage extends Vue {\n  @bcAuth.Action('login') login!: (data: Record<string, any>) => Promise<void>\n\n  showPass = false\n  language = 'en'\n  siteKey = '6LcbbKAcAAAAAGS9BixBvH4okIBVNsY7lywPDleX'\n  form: FormLogin = {\n    email: '',\n    password: ''\n  }\n  remember = false\n  isVerifyCaptcha = false\n  captcha = ''\n  isLoading = false\n  optionLanguage: Array<Record<string, any>> = [\n    {\n      id: 1,\n      lang: 'en'\n    },\n    {\n      id: 2,\n      lang: 'vi'\n    }\n  ]\n\n  rules: Record<string, any> = {\n    email: [\n      {\n        required: true,\n        message: this.$t('login.wrong-email'),\n        trigger: 'blur'\n      },\n      { type: 'email', message: this.$t('login.wrong-email-type'), trigger: 'blur' }\n    ],\n    password: [\n      {\n        required: true,\n        message: this.$t('login.wrong-password'),\n        trigger: 'blur'\n      }\n    ]\n  }\n  created(): void {\n    this.language = window.localStorage.getItem('bc-lang')!\n  }\n\n  get getDisableBtn(): boolean {\n    return !(this.form.email && this.form.password && this.isVerifyCaptcha)\n  }\n\n  verifyCaptcha(captcha: string): void {\n    this.captcha = captcha\n    this.isVerifyCaptcha = true\n  }\n  expiredCaptcha(): void {\n    this.isVerifyCaptcha = false\n  }\n\n  handleSignUp(): void {\n    this.$router.push({ name: 'sign-up' })\n  }\n  handleForgotPass(): void {\n    this.$router.push({ name: 'forgot-password' })\n  }\n  handleChangeLanguage(): void {\n    //@ts-ignore\n    this.$refs['verify']?.clearValidate()\n  }\n\n  /**\n   * * Luồng login: validate => verify => home\n   */\n\n  handleLogin(): void {\n    if (this.getDisableBtn) {\n      return\n    }\n    //@ts-ignore\n    this.$refs['form-login']?.validate(async valid => {\n      if (valid) {\n        try {\n          let message: any = ''\n          this.isLoading = true\n          //get 2FA\n          // const res = await apiAuth.get2FA({ email: this.form.email }, this.captcha)\n          // const type = res\n          const encodePass = this.$options.filters?.encryptPassword(this.form.password)\n\n          const res = await apiAuth.validateUser({ ...this.form, password: encodePass }, this.captcha)\n          const type = res\n          const nameRoute = type.type === 'EMAIL' ? 'verify-email' : type.type === 'SMS' ? 'verify-phone' : 'verify-app'\n\n          if (!res.emailVerified && !res.phoneVerified) {\n            try {\n              // await apiAuth.resendCode({ email: this.form.email })\n              this.$router.push({ name: 'verify-email', query: { type: 'EMAIL', email: this.form.email, reason: 'SIGN_UP' } })\n              message = this.$t('notify.send-code')\n              this.$message.success({ message, duration: 5000 })\n            } catch (error) {\n              message = this.$t('notify.send-code-fail')\n              this.$message.error({ message, duration: 5000 })\n            }\n          }\n\n          if (res.emailVerified && !res.phoneVerified) {\n            this.$router.push({ name: 'verify-phone-number', query: { email: this.form.email } })\n          }\n\n          //send code\n          if (res.emailVerified && res.phoneVerified && (type.type === 'EMAIL' || type.type === 'SMS')) {\n            try {\n              // await apiAuth.resendCode({ email: this.form.email })\n              this.$router.push({ name: nameRoute, query: { type: type.type, email: this.form.email, pass: encodePass, reason: 'REQUEST_LOGIN' } })\n              message = this.$t('notify.send-code')\n              this.$message.success({ message, duration: 5000 })\n            } catch (error) {\n              message = this.$t('notify.send-code-fail')\n              this.$message.error({ message, duration: 5000 })\n            }\n          }\n          if (res.emailVerified && res.phoneVerified && type.type === 'APP') {\n            this.$router.push({ name: nameRoute, query: { type: type.type, email: this.form.email, pass: encodePass, reason: 'REQUEST_LOGIN' } })\n          }\n\n          if (type.type === 'NONE') {\n            console.log('a')\n\n            this.login({ ...this.form, password: encodePass }).then(() => {\n              this.$router.push({ name: 'KycPending' })\n              message = this.$t('notify.login-success')\n              this.$message.success({ message, duration: 5000 })\n            })\n          }\n\n          this.isLoading = false\n        } catch (error: any) {\n          this.isLoading = false\n          const { data } = error.response\n          if (data.status === 'INVALID_CAPTCHA') {\n            //@ts-ignore\n            this.$refs['recaptcha'].reset()\n            this.isVerifyCaptcha = false\n          }\n        }\n      }\n    })\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LoginPage.vue?vue&type=template&id=805c2f24&scoped=true&\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./LoginPage.vue?vue&type=style&index=0&id=805c2f24&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"805c2f24\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}